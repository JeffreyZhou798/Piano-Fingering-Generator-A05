# GitHub Actions - è‡ªåŠ¨éƒ¨ç½²åˆ°Vercel
# æ³¨æ„ï¼šè¿™ä¸ªæ–‡ä»¶ä»…ç”¨äºéªŒè¯é…ç½®ï¼Œå®é™…éƒ¨ç½²é€šè¿‡Vercel Dashboardå®Œæˆ

name: CI/CD Pipeline

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  # æ„å»ºæµ‹è¯•ä»»åŠ¡
  build-and-test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkoutä»£ç 
      uses: actions/checkout@v4
    
    - name: è®¾ç½®Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'npm'
        cache-dependency-path: frontend/package-lock.json
    
    - name: å®‰è£…ä¾èµ–
      run: |
        cd frontend
        npm ci
    
    - name: ä»£ç æ£€æŸ¥
      run: |
        cd frontend
        npm run lint
    
    - name: æ„å»ºé¡¹ç›®
      run: |
        cd frontend
        npm run build
    
    - name: æ£€æŸ¥æ„å»ºè¾“å‡º
      run: |
        cd frontend
        ls -la out/
        echo "Build completed successfully!"

  # éƒ¨ç½²éªŒè¯ï¼ˆä¸å®é™…éƒ¨ç½²ï¼‰
  verify-deployment:
    runs-on: ubuntu-latest
    needs: build-and-test
    
    steps:
    - name: éªŒè¯éƒ¨ç½²é…ç½®
      run: |
        echo "âœ… æ„å»ºæˆåŠŸ"
        echo "âœ… éƒ¨ç½²é…ç½®å·²éªŒè¯"
        echo "ğŸ“ å®é™…éƒ¨ç½²è¯·é€šè¿‡Vercel Dashboardè¿›è¡Œ"
